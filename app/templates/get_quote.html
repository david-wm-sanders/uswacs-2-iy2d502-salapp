{% extends "_site.html" %}

{% block content %}
  <div class="row justify-content-md-center align-items-center h-100">
    <div class="col-md-3 justify-content-md-center">
      <!-- DEBUG: include novalidate for the purpose of testing server-side validation -->
      <!-- TODO: PRODUCTION_ALERT: remove novalidate -->
      <form action="" method="POST" novalidate>
        <!-- Security considerations: Include the form's hidden tags to enable the CSRF protection by including the token in a hidden field -->
        {{ form.hidden_tag() }}
        <div class="form-row">
          <div class="form-group col-md-6">{{ form.forename.label }}: {{ form.forename(class_='form-control') }}</div>
          <div class="form-group col-md-6">{{ form.surname.label }}: {{ form.surname(class_='form-control') }}</div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">
            {{ form.email.label }}:
            {{ form.email(class_='form-control', type="email") }}
            <small id="emailHelp" class="form-text text-muted">GDPR forbids us from sharing your email with anyone else without your explicit permission!</small>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">{{ form.account_number.label }}: {{ form.account_number(class_='form-control') }}</div>
          <div class="form-group col-md-6">{{ form.sort_code.label }}: {{ form.sort_code(class_='form-control') }}</div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">{{ form.address.label }}: {{ form.address(class_='form-control') }}</div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">{{ form.town.label }}: {{ form.town(class_='form-control') }}</div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">{{ form.postcode.label }}: {{ form.postcode(class_='form-control') }}</div>
          <div class="form-group col-md-6">{{ form.telephone.label }}: {{ form.telephone(class_='form-control') }}</div>
        </div>
        <hr/>
        <div class="form-row">
          <div class="form-group col-md-12">
            <!-- Display server-side form validation error messages -->
            {% if form.errors %}
              <ul>
              {% for field, errors in form.errors.items() %}
                {% if field == "recaptcha" %}
                  <li>reCAPTCHA: {{ ' '.join(errors) }}</li>
                {% else %}
                  <li>{{ form[field].label }}: {{ ' '.join(errors) }}</li>
                {% endif %}
              {% endfor %}
              </ul>
            {% else %}
              <p>No server-side validation error messages.</p>
            {% endif %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">
            <!-- Display the reCAPTCHA -->
            {{ form.recaptcha }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">
            <!-- Display the submit button -->
            {{ form.submit(class_='btn btn-primary') }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">
            <!-- Display flashed messages -->
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                {% for message in messages %}
                  <div>{{ message }}</div>
                {% endfor %}
              {% else %}
                <div>No flashed messages.</div>
              {% endif %}
            {% endwith %}
          </div>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
